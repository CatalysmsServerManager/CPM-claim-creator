(function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)i=s[u],a[i]&&d.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={app:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var m=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("64a9"),a=n.n(o);a.a},"05ae":function(e,t,n){},3768:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("sidebar"),n("sdtd-map")],1)},r=[],i={name:"app",data:function(){return{claimTypes:["hostilefree","notify","command","leveled","reversed","normal","timed","portal","openhours","playerlevel","lcbfree"]}}},s=i,c=(n("034f"),n("2877")),l=Object(c["a"])(s,a,r,!1,null,null,null),m=l.exports,u=n("ecee"),d=n("c074"),p=n("ad3d"),h=(n("4989"),n("f9e3"),n("ab8b"),n("2dd8"),n("5f5b")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidenav"},[n("h1",[e._v("CPM Advanced Claim creator")]),n("a",{directives:[{name:"b-modal",rawName:"v-b-modal.server-settings",modifiers:{"server-settings":!0}}],attrs:{href:"#"}},[e._v("Server settings")]),n("a",{directives:[{name:"b-modal",rawName:"v-b-modal.claims",modifiers:{claims:!0}}],attrs:{href:"#"}},[e._v("Claims")]),n("a",{directives:[{name:"b-modal",rawName:"v-b-modal.commands",modifiers:{commands:!0}}],attrs:{href:"#"}},[e._v("\n    Commands\n    "),e.commands?n("b-badge",{attrs:{pill:"",variant:"primary"}},[e._v(e._s(e.commands))]):e._e()],1),n("a",{attrs:{href:"https://confluence.catalysm.net/pages/viewpage.action?pageId=1114182",target:"_blank"}},[e._v("\n    Documentation\n    "),n("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"xs"}})],1),n("a",{attrs:{href:"https://catalysm.net/discord",target:"_blank"}},[e._v("\n    Discord\n    "),n("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"xs"}})],1),n("server-settings"),n("claims"),n("commands-modal")],1)},v=[],g={name:"SideBar",data:function(){return{commands:0}},mounted:function(){var e=this;te.$on("set-commands",function(t){e.commands=t})}},b=g,y=(n("b15c"),Object(c["a"])(b,f,v,!1,null,"27fd05ca",null)),x=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"map-container"}},[n("div",{attrs:{id:"map"}},[e._v("\n    "+e._s(e.mapMessage)+"\n    "),n("div",{staticClass:"leaflet-bottom leaflet-left"},[n("b-button-group",{attrs:{size:"sm",id:"selection-control"}},[n("b-button",{attrs:{disabled:"area"===e.selectionMode},on:{click:e.areaSelect}},[e._v("Select area")]),n("b-button",{attrs:{disabled:"region"===e.selectionMode},on:{click:e.regionSelect}},[e._v("Select region")]),n("b-button",{attrs:{variant:"danger"},on:{click:e.clearSelection}},[e._v("Clear selection")])],1)],1)])])},w=[],_=(n("96cf"),n("3b8d")),T=(n("ac4d"),n("8a81"),n("ac6a"),n("e11e")),C=n.n(T),z={name:"sdtd-map",data:function(){return{map:null,tileLayer:null,layers:[],mapMessage:"Please fill in connection info in the server settings tab.",mapInfo:{regionsize:512,chunksize:16,tilesize:128,maxzoom:4},clickMarkers:[],selectedRegionsRecs:[],selectedRegions:[],selectedArea:null,claimTypes:window.claimTypes,connectionInfo:{ip:"",port:"",adminUser:"",adminToken:""},selectionMode:"area",colors:["purple","cyan","red","green","blue","yellow","orange","brown","coral","chocolate","skyblue"],colorIterator:0}},computed:{cpmPort:function(){return parseInt(this.connectionInfo.port)+1},activeColor:function(){return this.colors[this.colorIterator]}},mounted:function(){var e=this;localStorage.connectionInfo&&(this.connectionInfo=JSON.parse(localStorage.connectionInfo)),this.connectionInfo.ip&&this.connectionInfo.port&&this.createMap(),te.$on("connection-info",function(t){e.connectionInfo=t,null!=e.map&&(e.map.remove(),e.map=null,e.createMap())}),te.$on("refresh-claims",function(){null!=e.map&&(e.map.remove(),e.map=null,e.createMap())})},methods:{areaSelect:function(e){C.a.DomEvent.stop(e),this.clearSelection(),this.selectionMode="area"},regionSelect:function(e){C.a.DomEvent.stop(e),this.clearSelection(),this.selectionMode="region"},clearSelection:function(e){e&&C.a.DomEvent.stop(e);var t=!0,n=!1,o=void 0;try{for(var a,r=this.clickMarkers[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;i.remove()}}catch(p){n=!0,o=p}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}this.clickMarkers=[],this.selectedArea&&this.selectedArea.remove();var s=!0,c=!1,l=void 0;try{for(var m,u=this.selectedRegionsRecs[Symbol.iterator]();!(s=(m=u.next()).done);s=!0){var d=m.value;d.remove()}}catch(p){c=!0,l=p}finally{try{s||null==u.return||u.return()}finally{if(c)throw l}}this.selectedRegions=[],te.$emit("area-selected",null),te.$emit("region-selected",this.selectedRegions)},handleRegionClick:function(){},handleAreaClick:function(){},createMap:function(){var e=this;this.mapMessage="",this.initMap(),this.initLayers(),this.map.on("click",function(t){if("area"===e.selectionMode&&(e.clickMarkers.length>1&&(e.clickMarkers[0].remove(),e.clickMarkers=e.clickMarkers.slice(1,e.clickMarkers.length)),e.clickMarkers.push(C.a.circle(t.latlng,{radius:1}).addTo(e.map)),2===e.clickMarkers.length)){var n=[e.clickMarkers[0].getLatLng(),e.clickMarkers[1].getLatLng()];e.selectedArea&&e.selectedArea.remove();var o=C.a.rectangle(n,{weight:1}).addTo(e.map);e.selectedArea=o,te.$emit("area-selected",n)}if("region"===e.selectionMode){var a=e.CoordToRegion(t.latlng),r=e.FormatRegionFileName(a),i={W:a.lat*e.mapInfo.regionsize,E:a.lat*e.mapInfo.regionsize+e.mapInfo.regionsize,N:a.lng*e.mapInfo.regionsize+e.mapInfo.regionsize,S:a.lng*e.mapInfo.regionsize,Name:r,Type:"To be confirmed reset region"},s=e.createClaimRectangle(i,"Selected region","grey");s.addTo(e.map),e.selectedRegionsRecs.push(s),e.selectedRegions.push(r),te.$emit("region-selected",e.selectedRegions)}})},GetSdtdTileLayer:function(e){var t=C.a.tileLayer("http://".concat(this.connectionInfo.ip,":").concat(this.connectionInfo.port,"/map/{z}/{x}/{y}.png?adminUser={adminUser}&adminToken={adminToken}"),{maxZoom:e.maxzoom+1,minZoom:Math.max(0,e.maxzoom-5),maxNativeZoom:e.maxzoom,minNativeZoom:0,tileSize:e.tilesize,adminUser:this.connectionInfo.adminUser,adminToken:this.connectionInfo.adminToken});return t.getTileUrl=function(e){return e.y=-e.y-1,C.a.TileLayer.prototype.getTileUrl.bind(t)(e)},t},initMap:function(){var e=this.mapInfo,t={project:function(t){return new C.a.Point(t.lat/Math.pow(2,e.maxzoom),t.lng/Math.pow(2,e.maxzoom))},unproject:function(t){return new C.a.LatLng(t.x*Math.pow(2,e.maxzoom),t.y*Math.pow(2,e.maxzoom))}},n=C.a.extend({},C.a.CRS.Simple,{projection:t,transformation:new C.a.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}});this.map=C.a.map("map",{attributionControl:!1,crs:n}).setView([0,0],Math.max(0,this.mapInfo.maxzoom-1))},getClaims:function(e){return fetch("".concat(window.requestProxy,"/api/claims?ip=").concat(this.connectionInfo.ip,"&port=").concat(this.cpmPort,"&type=").concat(e)).then(function(e){return e?e.json():[]}).then(function(e){return e})},drawAllClaims:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n,o,a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.colorIterator=0,t=!0,n=!1,o=void 0,e.prev=4,a=this.claimTypes[Symbol.iterator]();case 6:if(t=(r=a.next()).done){e.next=14;break}return i=r.value,e.next=10,this.drawClaim(i);case 10:this.colorIterator++;case 11:t=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](4),n=!0,o=e.t0;case 20:e.prev=20,e.prev=21,t||null==a.return||a.return();case 23:if(e.prev=23,!n){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return this.colorIterator=0,e.next=31,this.drawClaim("resetregion");case 31:case"end":return e.stop()}},e,this,[[4,16,20,28],[21,,23,27]])}));function t(){return e.apply(this,arguments)}return t}(),drawClaim:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,o,a,r,i,s,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClaims(t);case 2:for(n=e.sent,o=[],a=!0,r=!1,i=void 0,e.prev=7,s=n[Symbol.iterator]();!(a=(c=s.next()).done);a=!0)l=c.value,o.push(this.createClaimRectangle(l,t));e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),r=!0,i=e.t0;case 15:e.prev=15,e.prev=16,a||null==s.return||s.return();case 18:if(e.prev=18,!r){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:this.layers[t]=new C.a.LayerGroup(o);case 24:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));function t(t){return e.apply(this,arguments)}return t}(),createClaimRectangle:function(e,t,n){var o=C.a.rectangle([[e.W,e.S],[e.E,e.N]],{color:n||this.activeColor,weight:1});if(t){var a=C.a.popup().setContent("Name: ".concat(e.Name," Type: ").concat(t," ").concat(e.Type));o.bindPopup(a)}return o},initLayers:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tileLayer=this.GetSdtdTileLayer(this.mapInfo),this.tileLayer.addTo(this.map),e.next=4,this.drawAllClaims();case 4:this.layers["Regions"]=this.getRegionLayer(this.mapInfo),C.a.control.layers(null,this.layers).addTo(this.map);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),FormatRegionFileName:function(e){return"r."+e.lat+"."+e.lng+".7rg"},CoordToRegion:function(e){var t=Math.floor((e.lat+16777216)/this.mapInfo.regionsize-16777216/this.mapInfo.regionsize),n=Math.floor((e.lng+16777216)/this.mapInfo.regionsize-16777216/this.mapInfo.regionsize);return C.a.latLng(t,n)},getRegionLayer:function(e){var t=this,n=C.a.gridLayer({maxZoom:e.maxzoom+1,minZoom:0,maxNativeZoom:e.maxzoom+1,tileSize:e.tilesize});return n.createTile=function(n){var o=e.tilesize*Math.pow(2,e.maxzoom-n.z),a=n.x*o,r=(-1-n.y)*o,i=C.a.latLng(a,r),s=C.a.DomUtil.create("canvas","leaflet-tile");s.width=e.tilesize,s.height=e.tilesize;var c=s.getContext("2d");c.fillStyle="white",c.lineWidth=1,c.font="14px Arial",c.strokeStyle="black";var l=o/e.regionsize;if(l>=1){var m=0;while(m<e.tilesize)c.beginPath(),c.moveTo(m,0),c.lineTo(m,e.tilesize),c.stroke(),c.beginPath(),c.moveTo(0,m),c.lineTo(e.tilesize,m),c.stroke(),m+=e.tilesize/l;var u=t.CoordToRegion(i),d=t.FormatRegionFileName(u);c.lineWidth=4,c.strokeText(d,4,e.tilesize-5),c.fillText(d,4,e.tilesize-5)}else if(a%e.regionsize==0&&(c.beginPath(),c.moveTo(0,0),c.lineTo(0,e.tilesize),c.stroke()),r%e.regionsize==0&&(c.beginPath(),c.moveTo(0,e.tilesize),c.lineTo(e.tilesize,e.tilesize),c.stroke()),a%e.regionsize==0&&r%e.regionsize==0){var p=t.CoordToRegion(i),h=t.FormatRegionFileName(p);c.lineWidth=4,c.strokeText(h,4,e.tilesize-5),c.fillText(h,4,e.tilesize-5)}return s},n}}},S=z,I=(n("c772"),Object(c["a"])(S,k,w,!1,null,"eb4a7442",null)),M=I.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"settingsModal",attrs:{id:"server-settings",title:"Connection info",size:"lg"},on:{ok:e.onSubmit}},[n("div",{staticClass:"my-4"},[n("b-form-group",{attrs:{id:"input-group-1",label:"IP address:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",required:"",placeholder:"123.456.7.8"},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),n("b-form-group",{attrs:{id:"input-group-1",label:"Port:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",required:"",placeholder:"8082"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1),n("b-form-group",{attrs:{id:"input-group-1",label:"Admin user:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",placeholder:"user"},model:{value:e.form.adminUser,callback:function(t){e.$set(e.form,"adminUser",t)},expression:"form.adminUser"}})],1),n("b-form-group",{attrs:{id:"input-group-1",label:"Admin token:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",placeholder:"secret-token",type:"password"},model:{value:e.form.adminToken,callback:function(t){e.$set(e.form,"adminToken",t)},expression:"form.adminToken"}})],1)],1)])},L=[],$={mounted:function(){localStorage.connectionInfo&&(this.form=JSON.parse(localStorage.connectionInfo))},data:function(){return{form:{ip:"",port:"",adminUser:"",adminToken:""},show:!0}},methods:{onSubmit:function(){localStorage.connectionInfo=JSON.stringify(this.form),te.$emit("connection-info",this.form)}}},A=$,N=(n("e6fc"),Object(c["a"])(A,R,L,!1,null,"f6173f6e",null)),H=N.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{ref:"claimsModal",attrs:{id:"claims",title:"Claims",size:"xl"}},[n("b-button-group",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"claim-creator",expression:"'claim-creator'"}],attrs:{variant:"success"}},[e._v("Create")]),n("b-button",{attrs:{variant:"danger"},on:{click:e.onDelete}},[e._v("Delete claim(s)")])],1),n("b-table",{attrs:{striped:"",hover:"",items:e.claims,borderless:e.borderless,small:e.small,selectable:"","select-mode":e.multi},on:{"row-selected":e.rowSelected}})],1),n("claim-creator",{attrs:{selectedArea:e.selectedArea,selectedRegions:e.selectedRegions}})],1)},j=[],P={data:function(){return{mapInfo:{regionsize:512,chunksize:16,tilesize:128,maxzoom:4},selected:[],claims:[],commands:[],selectedArea:null,selectedRegions:[],claimTypes:window.claimTypes,connectionInfo:{ip:"",port:"",adminUser:"",adminToken:""}}},computed:{cpmPort:function(){return parseInt(this.connectionInfo.port)+1}},mounted:function(){var e=this;localStorage.connectionInfo&&(this.connectionInfo=JSON.parse(localStorage.connectionInfo)),this.getClaims(),te.$on("refresh-claims",function(){e.claims=[],e.getClaims()}),te.$on("area-selected",function(t){e.selectedArea=t}),te.$on("region-selected",function(t){e.selectedRegions=t}),te.$on("add-command",function(t){e.commands.push(t)})},methods:{FormatRegionFileName:function(e){return"r."+e.lat+"."+e.lng+".7rg"},CoordToRegion:function(e){var t=Math.floor((e.lat+16777216)/this.mapInfo.regionsize-16777216/this.mapInfo.regionsize),n=Math.floor((e.lng+16777216)/this.mapInfo.regionsize-16777216/this.mapInfo.regionsize);return C.a.latLng(t,n)},onDelete:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n,o,a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(t=!0,n=!1,o=void 0,e.prev=3,a=this.selected[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)i=r.value,"Reset region"===i["Claim type"]?te.$emit("add-command","mrr remove ".concat(i.Name)):te.$emit("add-command","ccc remove ".concat(i.Name));e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](3),n=!0,o=e.t0;case 11:e.prev=11,e.prev=12,t||null==a.return||a.return();case 14:if(e.prev=14,!n){e.next=17;break}throw o;case 17:return e.finish(14);case 18:return e.finish(11);case 19:case"end":return e.stop()}},e,this,[[3,7,11,19],[12,,14,18]])}));function t(){return e.apply(this,arguments)}return t}(),rowSelected:function(e){this.selected=e},getClaims:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n,o,a,r,i,s,c,l,m,u,d,p,h,f,v,g,b,y,x,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClaimType("resetregion");case 2:t=e.sent,n=!0,o=!1,a=void 0,e.prev=6,r=this.claimTypes[Symbol.iterator]();case 8:if(n=(i=r.next()).done){e.next=35;break}return s=i.value,e.next=12,this.getClaimType(s);case 12:for(c=e.sent,l=!0,m=!1,u=void 0,e.prev=16,d=c[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)h=p.value,h["Claim type"]=s,h.options=h.Type,delete h.Type,this.claims.push(h);e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](16),m=!0,u=e.t0;case 24:e.prev=24,e.prev=25,l||null==d.return||d.return();case 27:if(e.prev=27,!m){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n=!0,e.next=8;break;case 35:e.next=41;break;case 37:e.prev=37,e.t1=e["catch"](6),o=!0,a=e.t1;case 41:e.prev=41,e.prev=42,n||null==r.return||r.return();case 44:if(e.prev=44,!o){e.next=47;break}throw a;case 47:return e.finish(44);case 48:return e.finish(41);case 49:for(f=!0,v=!1,g=void 0,e.prev=52,b=t[Symbol.iterator]();!(f=(y=b.next()).done);f=!0)x=y.value,k=this.CoordToRegion({lat:(x.W+x.E)/2,lng:(x.N+x.S)/2}),x.Name=this.FormatRegionFileName(k),x["Claim type"]="Reset region",this.claims.push(x);e.next=60;break;case 56:e.prev=56,e.t2=e["catch"](52),v=!0,g=e.t2;case 60:e.prev=60,e.prev=61,f||null==b.return||b.return();case 63:if(e.prev=63,!v){e.next=66;break}throw g;case 66:return e.finish(63);case 67:return e.finish(60);case 68:case"end":return e.stop()}},e,this,[[6,37,41,49],[16,20,24,32],[25,,27,31],[42,,44,48],[52,56,60,68],[61,,63,67]])}));function t(){return e.apply(this,arguments)}return t}(),getClaimType:function(e){return fetch("".concat(window.requestProxy,"/api/claims?ip=").concat(this.connectionInfo.ip,"&port=").concat(this.cpmPort,"&type=").concat(e)).then(function(e){return e?e.json():[]}).then(function(e){return e})}}},E=P,Y=Object(c["a"])(E,O,j,!1,null,"5502aa64",null),U=Y.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"claimCreator",attrs:{id:"claim-creator",title:"Create a claim",size:"lg"},on:{ok:e.createClaim}},[null===e.selectedArea&&e.selectedRegions.length<1?n("div",[n("b-alert",{attrs:{variant:"warning",show:""}},[e._v("You must select an area on the map first!")])],1):e._e(),null!==e.selectedArea?n("div",[n("div",[n("div",[e._v("\n        You are creating a claim that is\n        "),n("strong",[e._v(e._s(this.area))]),e._v(" blocks big.\n      ")]),n("div",[e._v("\n        The current command is:\n        "),n("div",[n("em",[e._v(e._s(e.command))])])]),n("hr"),n("label",{attrs:{for:"name"}},[e._v("Name")]),n("b-form-input",{attrs:{id:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("label",{attrs:{for:"claim-accessLevel"}},[e._v("Accesslevel")]),n("b-form-input",{attrs:{type:"number",placeholder:"0"},model:{value:e.accessLevel,callback:function(t){e.accessLevel=t},expression:"accessLevel"}}),n("label",{attrs:{for:"type-select"}},[e._v("The type of claim. This will control its behaviour")]),n("b-form-select",{attrs:{id:"type-select",options:e.claimTypes},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),"leveled"===e.type?n("div",[n("p",[e._v("This is a normal claim, but with the option to level the upper and lower boundary of a claim. A normal claim reaches from bedrock to heaven. This claim has height and depth. Designed for protecting underground bases (with a normal claim, players walking on ground above the base would get tp'd out without knowing what they intruded) or for bases that have public tunnels under them (with a normal claim, players wouldnt be able to use the tunnel under the protected base).")]),n("label",{attrs:{for:"ycoordHigh"}},[e._v("Y coordinate top")]),n("b-form-input",{attrs:{id:"ycoordHigh",placeholder:"120",type:e.number},model:{value:e.options.yCoordHigh,callback:function(t){e.$set(e.options,"yCoordHigh",t)},expression:"options.yCoordHigh"}}),n("label",{attrs:{for:"ycoordLow"}},[e._v("Y coordinate bottom")]),n("b-form-input",{attrs:{id:"ycoordLow",placeholder:"40",type:e.number},model:{value:e.options.yCoordLow,callback:function(t){e.$set(e.options,"yCoordLow",t)},expression:"options.yCoordLow"}})],1):e._e(),"notify"===e.type?n("div",[n("p",[e._v("This claim defines a zone in which players get a configurable message in chat when they enter or exit the claim.")]),n("label",{attrs:{for:"enteringText"}},[e._v("Entering text")]),n("b-form-input",{attrs:{id:"enteringText",placeholder:"You are entering a claim",type:e.text,required:""},model:{value:e.options.enteringText,callback:function(t){e.$set(e.options,"enteringText",t)},expression:"options.enteringText"}}),n("label",{attrs:{for:"exitingText"}},[e._v("Exiting text")]),n("b-form-input",{attrs:{id:"exitingText",placeholder:"You are exiting a claim",type:e.text,required:""},model:{value:e.options.exitingText,callback:function(t){e.$set(e.options,"exitingText",t)},expression:"options.exitingText"}})],1):e._e(),"openhours"===e.type?n("div",[n("p",[e._v("This is a normal claim, but with assigned opening hours. Tired of your lobby or central tradingstation getting abused/wrecked by players for surviving (horde) night? Just set it to opening hours 0400 to 2200 and players will get tp'd out if they enter the area outside that hours.")]),n("label",{attrs:{for:"openingHour"}},[e._v("Opening hour")]),n("b-form-input",{attrs:{id:"openingHour",type:e.number},model:{value:e.options.openingHour,callback:function(t){e.$set(e.options,"openingHour",t)},expression:"options.openingHour"}}),n("label",{attrs:{for:"closingHour"}},[e._v("Closing hour")]),n("b-form-input",{attrs:{id:"closingHour",type:e.number},model:{value:e.options.closingHour,callback:function(t){e.$set(e.options,"closingHour",t)},expression:"options.closingHour"}})],1):e._e(),"portal"===e.type?n("div",[n("p",[e._v("Define an area and a triggerheight and an allowed player will get tp'd to a preset location.")]),n("label",{attrs:{for:"stepheight"}},[e._v("Stepheight")]),n("b-form-input",{attrs:{id:"stepheight",type:e.number},model:{value:e.options.stepheight,callback:function(t){e.$set(e.options,"stepheight",t)},expression:"options.stepheight"}}),n("h3",[e._v("Teleport destination")]),n("label",{attrs:{for:"portalX"}},[e._v("X coordinate")]),n("b-form-input",{attrs:{id:"portalX",type:e.number},model:{value:e.options.portalX,callback:function(t){e.$set(e.options,"portalX",t)},expression:"options.portalX"}}),n("label",{attrs:{for:"portalY"}},[e._v("Y coordinate")]),n("b-form-input",{attrs:{id:"portalY",type:e.number},model:{value:e.options.portalY,callback:function(t){e.$set(e.options,"portalY",t)},expression:"options.portalY"}}),n("label",{attrs:{for:"portalZ"}},[e._v("Z coordinate")]),n("b-form-input",{attrs:{id:"portalZ",type:e.number},model:{value:e.options.portalZ,callback:function(t){e.$set(e.options,"portalZ",t)},expression:"options.portalZ"}})],1):e._e(),"reversed"===e.type?n("div",[n("p",[e._v("Create an area for locking players in (aka jail). When whitelisted for a reversed claim, a player cannot leave the area and will get tp'd back in if he/she tries.")])]):e._e(),"hostilefree"===e.type?n("div",[n("p",[e._v("This is used for creating hostilefree area's. All hostiles will despawn in this type of advanced claim..")])]):e._e(),"timed"===e.type?n("div",[n("p",[e._v("Create an area for protecting bases/structures. Players not on whitelist of the claim will get tp'd out. This claim type has a time to live (hours). After the time has passed this claim will vanish.")]),n("label",{attrs:{for:"timeToLive"}},[e._v("Hours before claims vanishes")]),n("b-form-input",{attrs:{id:"timeToLive",type:e.number},model:{value:e.options.timeToLive,callback:function(t){e.$set(e.options,"timeToLive",t)},expression:"options.timeToLive"}})],1):e._e(),"command"===e.type?n("div",[n("p",[e._v("Trigger one or multiple console commands when a player enter this claim area. The claim type must be enclosed in double quotes and parameters with spaces within each command must be enclosed in single quotes. Use semicolon ( ; ) to seperate commands.")]),n("label",{attrs:{for:"command"}},[e._v("Command to execute")]),n("b-form-input",{attrs:{id:"command"},model:{value:e.options.command,callback:function(t){e.$set(e.options,"command",t)},expression:"options.command"}})],1):e._e(),"playerlevel"===e.type?n("div",[n("p",[e._v("This claim can be used to restrict/grant access to a claim by player level. Built in basic logical expression, plus support for level ranges.")]),n("label",{attrs:{for:"playerLevelCheck"}},[e._v("Operator check")]),n("b-form-input",{attrs:{id:"playerLevelCheck"},model:{value:e.options.playerLevelCheck,callback:function(t){e.$set(e.options,"playerLevelCheck",t)},expression:"options.playerLevelCheck"}})],1):e._e(),"lcbfree"===e.type?n("div",[n("p",[e._v("Control abillity to place LCB's within the boundaries of the lcbfree adv. claim. Allow to place LCB's by accesslevel and/or whitelist. If not allowed to place LCB, it will be removed and put back in player inventory. .")])]):e._e()],1)]):e._e(),e.selectedRegions.length>0?n("div",[n("div",[e._v("You have selected "+e._s(e.selectedRegions.length)+" regions.")]),n("ul",{attrs:{id:"reset-regions"}},e._l(e.selectedRegions,function(t,o){return n("li",{key:"region-"+o},[e._v(e._s(t))])}),0)]):e._e()])},Z=[],q=(n("7f7f"),{data:function(){return{claimTypes:window.claimTypes,name:"My_cool_new_claim",type:null,options:{yCoordHigh:120,yCoordLow:40,enteringText:"You are entering a claim",exitingText:"You are exiting a claim",openingHour:"9",closingHour:"17",stepheight:64,portalX:50,portalY:0,portalZ:-80,timeToLive:12,command:"say 'Welcome ${playerName} to the claim!'",playerLevelCheck:"<=20"},accessLevel:0}},props:["selectedArea","selectedRegions"],computed:{area:function(){var e=Math.abs(this.selectedArea[0].lat-this.selectedArea[1].lat),t=Math.abs(this.selectedArea[0].lng-this.selectedArea[1].lng);return Math.round(2*(e+t))},command:function(){var e="ccc add ".concat(this.name," ").concat(this.getW()," ").concat(this.getE()," ").concat(this.getN()," ").concat(this.getS()," ").concat(this.accessLevel," ");switch(this.type){case"normal":break;case"hostilefree":e+="".concat(this.type);break;case"leveled":e+='"'.concat(this.type,":").concat(this.options.yCoordHigh,",").concat(this.options.yCoordLow,'"');break;case"notify":e+='"'.concat(this.type,":").concat(this.options.enteringText,":").concat(this.options.exitingText,'"');break;case"openhours":e+='"'.concat(this.type,":").concat(this.options.openingHour,"-").concat(this.options.closingHour,'"');break;case"portal":e+='"'.concat(this.type,":").concat(Math.round(this.options.stepheight),":").concat(Math.round(this.options.portalX),",").concat(Math.round(this.options.portalY),",").concat(Math.round(this.options.portalZ),'"');break;case"reversed":e+="".concat(this.type);break;case"timed":e+="".concat(this.type,":").concat(this.options.timeToLive);break;case"command":e+='"'.concat(this.type,":").concat(this.options.command,'"');break;case"lcbfree":e+="".concat(this.type);break;case"playerlevel":e+='"'.concat(this.type,":").concat(this.options.playerLevelCheck,'"');break;default:break}return e}},methods:{createClaim:function(){if(this.selectedArea&&te.$emit("add-command",this.command),this.selectedRegions.length){var e=!0,t=!1,n=void 0;try{for(var o,a=this.selectedRegions[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var r=o.value;te.$emit("add-command","mrr add ".concat(r))}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},getW:function(){return Math.round(Math.min(this.selectedArea[0].lat,this.selectedArea[1].lat))},getE:function(){return Math.round(Math.max(this.selectedArea[0].lat,this.selectedArea[1].lat))},getN:function(){return Math.round(Math.max(this.selectedArea[0].lng,this.selectedArea[1].lng))},getS:function(){return Math.round(Math.min(this.selectedArea[0].lng,this.selectedArea[1].lng))}}}),F=q,J=Object(c["a"])(F,D,Z,!1,null,null,null),W=J.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:"commands",title:"Commands",size:"lg"}},[e.executing?n("div",[n("b-progress",{attrs:{value:e.executed,max:e.commands.length,"show-progress":"",animated:""}})],1):e._e(),e.commands.length>0?n("div",[n("b-button",{staticClass:"mx-auto",attrs:{variant:"success",size:"lg"},on:{click:e.execute}},[e._v("Execute "+e._s(e.commands.length)+" command"+e._s(e.commands.length>1?"s":""))]),n("ul",e._l(e.commands,function(t,o){return n("li",{key:"command-"+o},[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.deleteCommand(o)}}},[n("font-awesome-icon",{attrs:{icon:"trash-alt",size:"xs"}}),e._v("Delete\n          ")],1),e._v("\n          "+e._s(t)+"\n        ")],1)}),0),n("hr")],1):n("div",[n("p",[e._v("There are no commands in the queue yet. Create or delete some claims first!")])]),n("hr"),n("h3",[e._v("History")]),n("div",[n("ul",e._l(e.history,function(t,o){return n("span",{key:"history-"+o,class:{"text-danger":!t.success,"text-success":t.success}},[n("li",{attrs:{id:e.generateId(t)}},[e._v(e._s(e.formatDate(t.date))+" - "+e._s(t.command))]),n("b-tooltip",{attrs:{target:e.generateId(t),placement:"left"}},[e._v(e._s(t.statusText))])],1)}),0)])])],1)},B=[],G=(n("5df3"),n("4f7f"),n("75fc")),V=(n("a481"),{data:function(){return{commands:[],connectionInfo:{ip:"",port:"",adminUser:"",adminToken:""},history:[],executing:!1,executed:0}},methods:{generateId:function(e){return"".concat(e.date,"-").concat(e.command.replace("","-"))},formatDate:function(e){var t=new Date(e);return t.toLocaleString()},getHistory:function(){var e=localStorage.commandHistory;return e=e?JSON.parse(e):[],this.history=e,e},setHistory:function(e){this.history=e,localStorage.setItem("commandHistory",JSON.stringify(this.history))},addToHistory:function(e){var t=this.getHistory();t.unshift(e),this.setHistory(t)},deleteCommand:function(e){this.commands.splice(e,1),te.$emit("set-commands",this.commands.length)},execute:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n,o,a,r,i,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.executing=!0,t=!0,n=!1,o=void 0,e.prev=4,a=regeneratorRuntime.mark(function e(){var t,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=i.value,e.next=3,fetch("".concat(window.requestProxy,"/api/command?ip=").concat(s.connectionInfo.ip,"&port=").concat(s.connectionInfo.port,"&command=").concat(t,"&adminUser=").concat(s.connectionInfo.adminUser,"&adminToken=").concat(s.connectionInfo.adminToken));case 3:n=e.sent,o={success:n.ok,command:t,statusText:n.statusText,date:Date.now()},s.commands=s.commands.filter(function(e){return e!==t}),s.addToHistory(o),s.executed++;case 8:case"end":return e.stop()}},e)}),r=this.commands[Symbol.iterator]();case 7:if(t=(i=r.next()).done){e.next=12;break}return e.delegateYield(a(),"t0",9);case 9:t=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e["catch"](4),n=!0,o=e.t1;case 18:e.prev=18,e.prev=19,t||null==r.return||r.return();case 21:if(e.prev=21,!n){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:te.$emit("set-commands",this.commands.length),te.$emit("refresh-claims"),this.executing=!1,this.executed=0;case 30:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;localStorage.connectionInfo&&(this.connectionInfo=JSON.parse(localStorage.connectionInfo)),this.getHistory(),te.$on("connection-info",function(t){e.connectionInfo=t}),te.$on("add-command",function(t){e.commands.push(t),e.commands=Object(G["a"])(new Set(e.commands)),e.$bvToast.toast(t,{title:"A command was added to the queue"}),te.$emit("set-commands",e.commands.length)})}}),K=V,Q=(n("fc96"),Object(c["a"])(K,X,B,!1,null,"3921a538",null)),ee=Q.exports;n.d(t,"eventBus",function(){return te}),n("6cc5"),window.claimTypes=["hostilefree","notify","command","leveled","reversed","normal","timed","portal","openhours","playerlevel","lcbfree"],window.requestProxy="https://cpm-api.herokuapp.com",u["c"].add(d["a"]),u["c"].add(d["b"]),o["default"].component("font-awesome-icon",p["a"]),o["default"].component("sidebar",x),o["default"].component("sdtd-map",M),o["default"].component("server-settings",H),o["default"].component("claims",U),o["default"].component("claim-creator",W),o["default"].component("commands-modal",ee),o["default"].use(h["a"]),o["default"].config.productionTip=!1;var te=new o["default"];new o["default"]({render:function(e){return e(m)}}).$mount("#app")},"64a9":function(e,t,n){},"88f5":function(e,t,n){},b15c:function(e,t,n){"use strict";var o=n("88f5"),a=n.n(o);a.a},c772:function(e,t,n){"use strict";var o=n("d950"),a=n.n(o);a.a},d950:function(e,t,n){},e6fc:function(e,t,n){"use strict";var o=n("05ae"),a=n.n(o);a.a},fc96:function(e,t,n){"use strict";var o=n("3768"),a=n.n(o);a.a}});
//# sourceMappingURL=app.554478c7.js.map